<x-layout.main>

    <style>
        /* Aangepaste CSS voor de tabelborder */
        .table-header-border {
            border-top: 2px solid #343a40; /* Bovenste borderkleur */
        }
    </style>
    <!-- Start row -->
    <div class="row">
        <!-- Sidebar -->
        <div class="sidebar">
            <a
                href="https://oer.hz.nl/a37f2fd2-8b35-44ce-800a-c5abe33735aa"
                class="asidemenulink"
                target="_blank"
            >HBO-ICT Course and Examination regulations</a
            >
            <a
                href="https://oer.hz.nl/6978cdea-fb31-430b-9bf9-63206aa07754"
                class="asidemenulink"
                target="_blank"
            >HBO-ICT Implementation Regulations</a
            >
            <a
                href="https://glaze-donut-5a5.notion.site/PCO1en-Your-Showcase-Website-7bc8c340f66047d0b49b83e8dc44ba23"
                class="asidemenulink"
                target="_blank"
            >PCO 1 Showcase Website</a
            >
            <a
                href="https://hz.osiris-student.nl/voortgang"
                class="asidemenulink"
                target="_blank"
            >Course progress</a
            >
            <a
                href="https://github.com/HZ-HBO-ICT"
                class="asidemenulink"
                target="_blank"
            >HBO-ICT Github environment</a
            >
        </div>

        <!-- Negative space left -->
        <div class="col-sm-3"></div>

        <!-- Information -->
        <div class="col-sm-6 backgroundcolordashboard">
            <div class="tableboxdashboard">
                <table class="table">
                    <tr class="table-header-border">
                        <th>Semester:</th>
                        <th>Program:</th>
                        <th>Type exam:</th>
                        <th>ECs:</th>
                        <th>Grade:</th>
                    </tr>

                    <!-- Semester 1-->
                    <tr>
                        <td rowspan="5">1</td>
                        <td>Program- & Career Orientation</td>
                        <td>Individual process assessment</td>
                        <td>2.5</td>
                        <td>-</td>
                    </tr>

                    <tr>
                        <td>Computer Science Basics</td>
                        <td>Tentamen</td>
                        <td>5</td>
                        <td>-</td>
                    </tr>

                    <tr>
                        <td>Programming Basics</td>
                        <td>Case test (written knowledge test)</td>
                        <td>5</td>
                        <td>-</td>
                    </tr>

                    <tr>
                        <td>OOP</td>
                        <td>Presentation (individual)</td>
                        <td>10</td>
                        <td>-</td>
                    </tr>

                    <tr>
                        <td>OOP</td>
                        <td>Written knowledge test</td>
                        <td>10</td>
                        <td>-</td>
                    </tr>

                    <!-- Semester 2-->
                    <tr>
                        <td rowspan="11">2</td>
                        <td rowspan="5">Framework project 1</td>
                        <td>Written knowledge test</td>
                        <td>10</td>
                        <td>-</td>
                    </tr>

                    <tr>
                        <td>Written knowledge test</td>
                        <td>10</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>Assignment (group)</td>
                        <td>10</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>Assignment (individual)</td>
                        <td>10</td>
                        <td>-</td>
                    </tr>

                    <tr>
                        <td rowspan="4">Framework Project 2</td>
                        <td>Portfolio</td>
                        <td>10</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>Portfolio</td>
                        <td>10</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>Portfolio</td>
                        <td>10</td>
                        <td>-</td>
                    </tr>

                    <tr>
                        <td>Business IT Consultancy basics</td>
                        <td>Assignment (individual)</td>
                        <td>2.5</td>
                        <td>-</td>
                    </tr>

                    <tr>
                        <td>1 and 2</td>
                        <td>Personal Professional Development Exploration</td>
                        <td>Criterion-referenced assessment</td>
                        <td>12.5</td>
                        <td>-</td>
                    </tr>

                    <tr>
                        <td>??</td>
                        <td>IT Personality - projectweek 1</td>
                        <td>Portfolio</td>
                        <td>1.25</td>
                        <td>-</td>
                    </tr>

                    <tr>
                        <td>??</td>
                        <td>IT Personality International week</td>
                        <td>Portfolio</td>
                        <td>1.25</td>
                        <td>-</td>
                    </tr>

                    <tr>
                        <td>??</td>
                        <td>IT Personality 1</td>
                        <td>Portfolio</td>
                        <td>1.25</td>
                        <td>-</td>
                    </tr>

                    <tr>
                        <td>??</td>
                        <td>IT Personality 2</td>
                        <td>Portfolio</td>
                        <td>1.25</td>
                        <td>-</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Negative space right -->
        <div class="col-sm-3"></div>

        <!-- End row-->
    </div>
    <br /><br />

    <div class="row">
        <!-- Negative space left -->
        <div class="col-sm-2"></div>

        <!-- Information -->
        <div class="col-sm-8 backgroundcolornbsa">
            <div class="backgroundrownbsa">
                <h1>What is a NBSA?</h1>
                <p>
                    You get a NBSA when you have less than 45 ECs at the end of the
                    year, when you receive this you are forced to leave the
                    program/study. You can prevent this by doing your (home)work and
                    passing your exams.
                </p>
                <table>
                    <tr class="table-header-border">
                        <th>How am I doing?</th>
                        <th>Am I close to a NBSA?</th>
                        <th>What do I need to do?</th>
                    </tr>
                    <tr>
                        <td>Good</td>
                        <td>No</td>
                        <td>Nothing</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Negative space right -->
        <div class="col-sm-2"></div>
    </div>

    <div class="container mt-5 backgroundcolornbsa">
        <div class="backgroundrownbsa">
            <h1>Study Progress Monitor</h1>
            <div class="row">
                <div class="col-md-12">
                    <h4>Year 1 Progress</h4>
                    <div class="progress" style="height: 30px">
                        <!-- The green progress bar (showing obtained ECs) -->
                        <div
                            class="progress-bar bg-success"
                            id="progress-bar-green"
                            style="width: 0%; height: 30px"
                        >
                            0/60 EC
                        </div>
                        <!-- The red progress bar (up to 45 ECs) -->
                        <div
                            class="progress-bar bg-danger"
                            id="progress-bar-red"
                            style="width: 75%; height: 30px"
                        ></div>
                        <!-- The blank part (after 45 ECs) -->
                        <div
                            class="progress-bar"
                            id="progress-bar-blank"
                            style="
                    width: 25%;
                    height: 30px;
                    background-color: transparent;
                  "
                        ></div>
                    </div>
                    <p id="nbsa-warning" class="text-danger" style="display: none">
                        Warning: Below NBSA Boundary (45 EC)
                    </p>
                </div>
            </div>

            <!-- Form to add ECs -->
            <div class="row mt-4">
                <div class="col-md-6">
                    <h5>Add ECs</h5>
                    <form id="ec-form">
                        <div class="form-group">
                            <label for="obtained-ec">Enter obtained ECs: </label>
                            <input
                                type="decimal"
                                class="form-control"
                                id="obtained-ec"
                                min="0"
                                max="60"
                            />
                        </div>
                        <button type="submit" class="btn btn-primary">
                            Update Progress
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <br />

</x-layout.main>


<script>
    /**
     * EC progress bar
     */

// Constants
    const totalEC = 60;
    const nbsaBoundary = 45;

    // Load ECs from local storage
    function loadECs() {
        const obtainedEC = localStorage.getItem("obtainedEC");
        if (obtainedEC !== null) {
            updateProgressBar(parseFloat(obtainedEC)); // Gebruik parseFloat in plaats van parseInt
        }
    }

    // Update progress bar function
    function updateProgressBar(obtainedEC) {
        const greenPercentage = Math.min((obtainedEC / nbsaBoundary) * 100, 100); // Green part goes from 0 to 45 ECs
        const redPercentage = Math.max(
            ((nbsaBoundary - obtainedEC) / nbsaBoundary) * 100,
            0
        ); // Red part decreases until 45 ECs
        const blankPercentage =
            obtainedEC >= nbsaBoundary
                ? ((totalEC - obtainedEC) / totalEC) * 100
                : ((totalEC - nbsaBoundary) / totalEC) * 100; // Blank part from 45 to 60 ECs

        // Update green progress bar width
        const greenBar = document.getElementById("progress-bar-green");
        greenBar.style.width = greenPercentage + "%";
        greenBar.innerHTML = obtainedEC.toFixed(2) + "/60 EC"; // Geef EC's weer met 2 decimalen

        // Update red progress bar width (only from 0 to 45 ECs)
        const redBar = document.getElementById("progress-bar-red");
        redBar.style.width = redPercentage + "%";

        // Update blank progress bar width (from 46 to 60 ECs)
        const blankBar = document.getElementById("progress-bar-blank");
        blankBar.style.width = blankPercentage + "%";

        // Show warning if below NBSA boundary
        if (obtainedEC < nbsaBoundary) {
            document.getElementById("nbsa-warning").style.display = "block";
        } else {
            document.getElementById("nbsa-warning").style.display = "none";
        }
    }

    // Event listener for form submission
    document.getElementById("ec-form").addEventListener("submit", function (e) {
        e.preventDefault();
        const obtainedEC = parseFloat(document.getElementById("obtained-ec").value); // Gebruik parseFloat om decimale waarden te accepteren

        if (!isNaN(obtainedEC) && obtainedEC <= totalEC) {
            // Save to local storage
            localStorage.setItem("obtainedEC", obtainedEC);

            // Update progress bar
            updateProgressBar(obtainedEC);
        }
    });

    // Load ECs when page loads
    window.onload = loadECs;
</script>
